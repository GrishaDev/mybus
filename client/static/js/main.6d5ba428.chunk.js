(this.webpackJsonpmybus_client=this.webpackJsonpmybus_client||[]).push([[0],{140:function(e,t,a){e.exports=a(178)},145:function(e,t,a){},178:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),u=(a(145),a(34)),l=a(81),i=a(43),s=a(122),d=a(27),m=Object(i.b)({name:"form",initialState:{dialogStatus:null},reducers:{setDialogStatus:function(e,t){e.dialogStatus=t.payload}}}),f=m.actions.setDialogStatus,p=m.reducer,h=Object(i.b)({name:"requests",initialState:{},reducers:{updateSnackbar:function(){},showErrorAlert:function(){},showSuccessAlert:function(){},schedulesRequest:function(){},deleteScheduleRequest:function(){},createScheduleRequest:function(){},updateScheduleRequest:function(){}}}),b=h.actions,v=b.updateSnackbar,g=b.showErrorAlert,x=b.showSuccessAlert,k=b.schedulesRequest,y=b.deleteScheduleRequest,O=b.createScheduleRequest,w=b.updateScheduleRequest,j=h.reducer,E=Object(i.b)({name:"myschedules",initialState:{mail:"",token:"",dialogStatus:null,schedules:null},reducers:{updateToken:function(e,t){e.token=t.payload},updateSchedules:function(e,t){var a=t.payload;e.schedules=a},addSchedule:function(e,t){e.schedules.push(t.payload)},updateSchedule:function(e,t){var a=t.payload.id;console.log(a);var n=e.schedules.findIndex((function(e){return e.id===a}));e.schedules[n]=t.payload},deleteSchedule:function(e,t){var a=e.schedules.findIndex((function(e){return e.id===t.payload}));e.schedules.splice(a,1)},loginRequest:function(e,t){e.mail=t.payload},setDialogStatus:function(e,t){e.dialogStatus=t.payload}}}),S=E.actions,C=S.updateToken,T=S.updateSchedules,N=S.addSchedule,A=S.updateSchedule,M=S.deleteSchedule,W=S.loginRequest,R=(S.setDialogStatus,E.reducer),F=Object(d.c)({form:p,requests:j,myschedules:R}),q=a(7),D=a.n(q),z=a(10),P=a(24),I=a(109),B=a.n(I),H=!1,L="/api/",U=6e4,Y="BCD4EBerkE5vr8-MTicFVCVtL2-EEUORed8kRH4PncfX_S92s3ArP4uWJEt0-5ok0cos4uKxr4osFuelJzGNhSc",G=a(110),J=a.n(G),K=function(e){return new Promise((function(t){return setTimeout(t,e)}))},X=[{id:"3294a",name:"haha",mail:"blabla@bla.com",rule:{hour:9,minute:15},bus:126,station:3359,paused:!0},{id:"925bamba28",name:"arbuz23",mail:"blablaaa@bla.com",rule:{hour:15,minute:0},bus:171,station:1e3,scheduleTrigger:12},{id:"k0edCov0L",name:"arbuz",mail:"blablaaa@bla.com",rule:{hour:15,minute:22},bus:171,station:1e3},{id:"UV2TWMXak",name:"arbuz",mail:"blablaaa@bla.com",rule:{hour:15,minute:22},bus:171,station:1e3,webPushSub:!1},{id:"xGEzN-iNG",name:"arbuz",mail:"blablaaa@bla.com",rule:{hour:15,minute:22},bus:171,station:1e3,scheduleTrigger:{max:10,min:9},webPushSub:{token:"ksadksadkasd",something:!0}}],V=B.a.create({baseURL:L,headers:{auth:localStorage.token}}),Z={status:200,data:{id:"3294a",mail:"bla213bla@bla.com",rule:{hour:52,minute:5}}},_=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}return e.next=3,K(250);case 3:return e.abrupt("return",{data:"392A8349ABs9359SA"});case 4:return e.next=7,V.post("login",t).catch((function(e){throw e.response}));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}return e.next=3,K(300);case 3:return e.abrupt("return",{data:X});case 4:return e.next=6,V.get("schedules/mail/".concat(t)).catch((function(e){throw e.response}));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}return e.next=3,K(300);case 3:return e.abrupt("return",{status:200,data:{id:J.a.generate(),mail:"bla213bla@bla.com",rule:{hour:52,minute:5},bus:271,station:5,name:"test"}});case 4:return e.next=6,V.post("schedule",t).catch((function(e){throw e.response}));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(P.a)(D.a.mark((function e(t,a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}return e.next=3,K(250);case 3:return e.abrupt("return",Z);case 4:return e.next=6,V.put("schedule/".concat(t),a).catch((function(e){throw e.response}));case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),te=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}return e.next=3,K(250);case 3:return e.abrupt("return",{status:200});case 4:return e.next=6,V.delete("schedule/".concat(t)).catch((function(e){throw e.response}));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(P.a)(D.a.mark((function e(t,a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}return e.next=3,K(250);case 3:return e.abrupt("return",ne());case 4:return e.next=6,V.get("bustime/".concat(t,"/").concat(a)).catch((function(e){throw e.response}));case 6:return n=e.sent,e.abrupt("return",n.data||[]);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(){return[Math.floor(60*Math.random()+1),Math.floor(60*Math.random()+1),Math.floor(60*Math.random()+1)]},re=a(37),ce=Object(re.a)(),oe=D.a.mark(xe),ue=D.a.mark(ke),le=D.a.mark(ye),ie=D.a.mark(Oe),se=D.a.mark(we),de=D.a.mark(je),me=D.a.mark(Ee),fe=D.a.mark(Se),pe=D.a.mark(Ce),he=D.a.mark(Te),be=D.a.mark(Ne),ve=D.a.mark(Ae),ge=D.a.mark(Re);function xe(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.f)(W.type,Se);case 2:case"end":return e.stop()}}),oe)}function ke(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.f)(k.type,Ce);case 2:case"end":return e.stop()}}),ue)}function ye(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.f)(y.type,Te);case 2:case"end":return e.stop()}}),le)}function Oe(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.f)(O.type,Ne);case 2:case"end":return e.stop()}}),ie)}function we(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.f)(w.type,Ae);case 2:case"end":return e.stop()}}),se)}function je(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.f)(v,D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.c)("snackbar");case 2:a=e.sent,Object.assign(a,t.payload);case 4:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Object(z.f)(g,D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.c)("snackbar");case 2:e.sent.enqueueSnackbar(t.payload,{variant:"error",autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Object(z.f)(x,D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.c)("snackbar");case 2:e.sent.enqueueSnackbar(t.payload,{variant:"success",autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));case 6:case"end":return e.stop()}}),de)}function Ee(){var e,t;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(localStorage.auth){a.next=2;break}return a.abrupt("return");case 2:if(!(e=JSON.parse(localStorage.auth))){a.next=7;break}return t=e.mail,a.next=7,Object(z.d)(W(t));case 7:case"end":return a.stop()}}),me)}function Se(e){var t,a,n,r,c,o;return D.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,t=e.payload,u.next=4,Object(z.b)(_,{mail:t});case 4:return a=u.sent,n=a.data,localStorage.setItem("auth",JSON.stringify({token:n,mail:t})),u.next=9,Object(z.d)(f({success:!0,error:null}));case 9:return u.next=11,Object(z.d)(C(n));case 11:return u.next=13,Object(z.b)(Me);case 13:u.next=29;break;case 15:if(u.prev=15,u.t0=u.catch(0),401!==(null===u.t0||void 0===u.t0?void 0:u.t0.status)){u.next=24;break}return console.log("Unauthorized"),u.next=21,Object(z.d)(f({success:!1,error:u.t0.data.message}));case 21:return u.abrupt("return");case 24:return console.log("Error ".concat(null===u.t0||void 0===u.t0?void 0:u.t0.status)),o=void 0===(null===u.t0||void 0===u.t0||null===(r=u.t0.data)||void 0===r?void 0:r.message)?"Error contacting server":null===u.t0||void 0===u.t0||null===(c=u.t0.data)||void 0===c?void 0:c.message,u.next=28,Object(z.d)(f({success:!1,error:o}));case 28:console.log(u.t0);case 29:case"end":return u.stop()}}),fe,null,[[0,15]])}function Ce(){var e,t,a;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(z.e)();case 2:return e=n.sent,t=e.myschedules.mail,n.prev=4,n.next=7,Object(z.b)($,t);case 7:return a=n.sent,n.next=10,Object(z.d)(T(a.data));case 10:return n.next=12,Object(z.d)(x("Got Schedules"));case 12:n.next=26;break;case 14:if(n.prev=14,n.t0=n.catch(4),401!==n.t0.status){n.next=23;break}return console.log("Unauthorized"),n.next=20,Object(z.b)(We);case 20:return n.abrupt("return");case 23:return n.next=25,Object(z.d)(g("Cant get schedules from server"));case 25:console.log(n.t0);case 26:case"end":return n.stop()}}),pe,null,[[4,14]])}function Te(e){var t;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(z.b)(te,t);case 4:return a.next=6,Object(z.d)(M(t));case 6:return a.next=8,Object(z.d)(x("Deleted"));case 8:a.next=23;break;case 10:if(a.prev=10,a.t0=a.catch(1),401!==a.t0.status){a.next=19;break}return console.log("Unauthorized"),a.next=16,Object(z.b)(We);case 16:return a.abrupt("return");case 19:return console.log("Error ".concat(a.t0.status)),a.next=22,Object(z.d)(g("Failed deleting, status ".concat(a.t0.status)));case 22:console.log(a.t0);case 23:case"end":return a.stop()}}),he,null,[[1,10]])}function Ne(e){var t,a;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(z.b)(Q,t);case 4:return a=n.sent,n.next=7,Object(z.d)(N(a.data));case 7:return n.next=9,Object(z.d)(x("Created"));case 9:return n.next=11,Object(z.d)(f({success:!0,error:null}));case 11:n.next=28;break;case 13:if(n.prev=13,n.t0=n.catch(1),401!==n.t0.status){n.next=22;break}return console.log("Unauthorized"),n.next=19,Object(z.b)(We);case 19:return n.abrupt("return");case 22:return console.log("Error ".concat(n.t0.status)),n.next=25,Object(z.d)(g("Failed creating, status ".concat(n.t0.status)));case 25:return n.next=27,Object(z.d)(f({success:!1,error:n.t0.data.message}));case 27:console.log(n.t0);case 28:case"end":return n.stop()}}),be,null,[[1,13]])}function Ae(e){var t,a;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(z.b)(ee,t.id,t.data);case 4:return a=n.sent,n.next=7,Object(z.d)(A(a.data));case 7:return n.next=9,Object(z.d)(x("Updated"));case 9:return n.next=11,Object(z.d)(f({success:!0,error:null}));case 11:n.next=28;break;case 13:if(n.prev=13,n.t0=n.catch(1),401!==n.t0.status){n.next=22;break}return console.log("Unauthorized"),n.next=19,Object(z.b)(We);case 19:return n.abrupt("return");case 22:return console.log("Error ".concat(n.t0.status)),n.next=25,Object(z.d)(g("Failed updating, status ".concat(n.t0.status)));case 25:return n.next=27,Object(z.d)(f({success:!1,error:n.t0.data.message}));case 27:console.log(n.t0);case 28:case"end":return n.stop()}}),ve,null,[[1,13]])}function Me(){ce.push("/")}function We(){ce.push("/login")}function Re(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.a)([Ee(),xe(),ke(),ye(),Oe(),we(),je()]);case 2:case"end":return e.stop()}}),ge)}var Fe=Object(s.a)({context:{snackbar:{}}}),qe=Object(i.a)({reducer:F,middleware:[].concat(Object(l.a)(Object(i.c)({serializableCheck:{ignoredActions:[v.type,f.type,O.type,g.type]}})),[Fe])});Fe.run(Re);var De=qe,ze=(a(85),a(119)),Pe=a(80),Ie=a(22),Be=a(239),He=a(121),Le=a(87),Ue=a.n(Le),Ye=a(53),Ge=a.n(Ye),Je=Object(Be.a)(Object(He.a)({body:"#F5F5F5",text:"#363537",palette:{action:{selected:Ge.a[400],expanded:Ge.a[100]},background:{default:"#F5F5F5"},text:{primary:"#000000"},primary:Ge.a,secondary:Ue.a,type:"light"}})),Ke=Object(Be.a)(Object(He.a)({body:"#363537",text:"#FAFAFA",palette:{action:{selected:Ge.a[600],expanded:Ge.a[100]},background:{default:"#363537"},text:{primary:"#ffffff"},primary:{main:Ge.a[600]},secondary:Ue.a,type:"dark"}})),Xe=a(219),Ve=r.a.createContext(null),Ze=a(220),_e=function(e){if(localStorage)return localStorage.getItem(e)},$e=function(e,t){if(localStorage)return localStorage.setItem(e,t)};function Qe(e){var t=r.a.useState("true"===_e("darkTheme")),a=Object(Ie.a)(t,2),n=a[0],c=a[1],o={themeSwitch:function(){$e("darkTheme",!n),c(!n)}};return r.a.createElement(Ve.Provider,{value:o},r.a.createElement(Xe.a,{theme:n?Je:Ke},r.a.createElement(Ze.a,null),e.children))}var et=a(218);var tt,at=a(221),nt=a(222),rt=a(126),ct=a(111),ot=a.n(ct),ut=Object(et.a)({header:{width:"100%",background:"rgba(0,0,0,0.1)",height:50},dark:{float:"right"},hello:{float:"left",padding:10}}),lt=function(){var e=ut(),t=r.a.useContext(Ve),a=Object(u.c)((function(e){return e.myschedules.mail}));return r.a.createElement("div",{className:e.header},r.a.createElement(at.a,{className:e.dark,"aria-label":"theme",onClick:function(){return t.themeSwitch()}},r.a.createElement(nt.a,null)),r.a.createElement(at.a,{className:e.hello,"aria-label":"leave",onClick:function(){localStorage.removeItem("auth"),ce.push("/login")}},r.a.createElement(ot.a,null)),r.a.createElement(rt.a,{className:e.hello},"Hello ".concat(a)))},it=a(90),st=a(180),dt=a(224),mt=a(225),ft=function(e){var t=e.hour,a=e.minute;return t=t<10?"0".concat(t):t,a=a<10?"0".concat(a):a,"".concat(t,":").concat(a)},pt=a(223),ht=a(112),bt=a.n(ht),vt=a(113),gt=a.n(vt),xt=a(115),kt=a.n(xt),yt=a(116),Ot=a.n(yt),wt=a(114),jt=a.n(wt),Et=Object(et.a)({"@keyframes something":{"0%":{opacity:"0"},"100%":{opacity:"1"}},"@keyframes fly":{"0%":{transform:"translateX(-400%)"},"100%":{transform:"translateX(0%)"}},card:{position:"relative",color:"white",margin:"30px",height:"200px",width:"200px"},pausedCard:{filter:"brightness(50%)"},animate:{animation:"$fly 0.75s ease-out"},container:{display:"inline-block",position:"relative",width:"100%",verticalAlign:"middle",overflow:"hidden",zIndex:10},bus:{position:"absolute",right:0,top:0},forceTitle:{marginTop:5,width:"100%",position:"absolute",top:0,textAlign:"center",fontSize:"large",overflow:"hidden",textOverflow:"ellipsis",margin:"0 auto"},title:{},info:{margin:"0 auto",width:"50%",display:"flex","& p":{marginLeft:10}},actions:{position:"absolute",height:30,bottom:5,width:"100%",display:"flex",justifyContent:"space-between"}}),St=Object(n.memo)((function(e){var t=e.schedule,a=e.updateSchedule,c=e.deleteSchedule,o=e.pauseSchedule,u=Object(n.useMemo)((function(){return"".concat(ft(t.rule))}),[t]),l=Object(n.useMemo)((function(){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);var c=n%160;return"hsl("+c+", "+t+"%, "+a+"%)"}(t.id)}),[t]),i=Et(),s=Object(n.useState)(!0),d=Object(Ie.a)(s,2),m=d[0],f=d[1],p=Object(n.useState)("No buses"),h=Object(Ie.a)(p,2),b=h[0],v=h[1],g=Object(n.useRef)(null),x=Object(n.useRef)(!0);Object(n.useEffect)((function(){if(x.current)return setTimeout(k,1e3),g.current=setInterval(k,U),void(x.current=!1);f(!1)})),Object(n.useEffect)((function(){return function(){console.log("clear interval"),clearInterval(g)}}),[]);var k=Object(n.useMemo)((function(){return Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t.station,t.bus);case 2:a=e.sent,v(a||"No buses");case 4:case"end":return e.stop()}}),e)})))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(st.a,{elevation:3,className:"".concat(i.card," ").concat(m?i.animate:null,"\n         ").concat(t.paused?i.pausedCard:null),style:{background:l}},r.a.createElement(pt.a,{className:i.bus,badgeContent:t.bus,max:999,color:"primary"},r.a.createElement(bt.a,{fontSize:"small"})),r.a.createElement("div",{className:i.title},r.a.createElement("svg",{viewBox:"0 0 500 130",preserveAspectRatio:"xMinYMin meet"},r.a.createElement("path",{d:"M0,100 C150,200 350,0 500,100 L500,00 L0,0 Z",style:{stroke:"none",fill:"rgba(0,0,0,0.2)"}})),r.a.createElement("div",{className:i.forceTitle},t.name)),r.a.createElement("div",{className:i.info},r.a.createElement(gt.a,{style:{marginTop:10}})," ",r.a.createElement("p",null,u)),r.a.createElement("div",{className:i.info},r.a.createElement(jt.a,{style:{marginTop:10}})," ",r.a.createElement("p",null,b.toString())),r.a.createElement("div",{className:i.actions},r.a.createElement(at.a,{style:{color:"white"},"aria-label":"update",onClick:function(e){e.stopPropagation(),a(t)}},r.a.createElement(dt.a,null)),r.a.createElement(at.a,{style:{color:"white"},"aria-label":"update",onClick:function(e){e.stopPropagation(),o(t)}},(null===t||void 0===t?void 0:t.paused)?r.a.createElement(kt.a,null):r.a.createElement(Ot.a,null)),r.a.createElement(at.a,{style:{color:"white"},"aria-label":"delete",onClick:function(e){e.stopPropagation(),c(t)}},r.a.createElement(mt.a,null)))))})),Ct=a(230),Tt=a(237),Nt=a(229),At=a(227),Mt=a(228),Wt=a(226),Rt=a(214),Ft=r.a.forwardRef((function(e,t){return r.a.createElement(Rt.a,Object.assign({direction:"up",ref:t},e))})),qt=function(e){var t=e.open,a=e.setOpen,n=e.item,c=e.onConfirm,o=function(){a(!1)},u="Delete ".concat((null===n||void 0===n?void 0:n.name)||"","?");return r.a.createElement(Tt.a,{open:t,TransitionComponent:Ft,keepMounted:!0,onClose:o,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Wt.a,{id:"alert-dialog-slide-title"},u),r.a.createElement(At.a,null,r.a.createElement(Mt.a,{id:"alert-dialog-slide-description"},"this will delete forever!")),r.a.createElement(Nt.a,null,r.a.createElement(Ct.a,{onClick:o,color:"primary"},"No"),r.a.createElement(Ct.a,{onClick:function(){return c()},color:"primary"},"Yes")))},Dt=Object(et.a)({content:{minHeight:100,display:"flex",flexWrap:"wrap",justifyContent:"space-around",padding:10,transition:"1s"},item:{margin:10,width:250,textAlign:"center",fontWeight:"bold"},center:{display:"flex",justifyContent:"center"}}),zt=r.a.forwardRef((function(e,t){return r.a.createElement(Rt.a,Object.assign({direction:"up",ref:t},e))})),Pt=function(e){var t=e.open,a=e.setOpen,n=e.schedule,c=Dt(),o=function(){a(!1)},u="Schedule ".concat((null===n||void 0===n?void 0:n.name)||"something"),l=Object.keys(n),i=Object.values(n).map((function(e,t){var a=e;switch(l[t]){case"rule":a=ft(e);break;case"scheduleTrigger":a="max: ".concat(e.max,", min: ").concat(e.min);break;case"webPushSub":a=!!e}return r.a.createElement("div",{key:t,className:c.item},"".concat(l[t],": ").concat(a))}));return r.a.createElement(Tt.a,{open:t,TransitionComponent:zt,keepMounted:!0,onClose:o,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Wt.a,{id:"alert-dialog-slide-title",className:c.center},u),r.a.createElement(At.a,{className:c.content},i),r.a.createElement(Nt.a,null,r.a.createElement(Ct.a,{onClick:o,color:"primary"},"ok")))},It=a(26),Bt=a(232),Ht=a(78),Lt=a(234),Ut=a(236),Yt=Object(et.a)({picker:{width:"100%",padding:20},title:{textAlign:"center"},week:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignContent:"center",margin:"0 auto"},day:{borderRadius:"100%",margin:5,padding:5,width:30,textAlign:"center",fontWeight:"bold",transition:"0.5s","&:hover":{background:"gray",cursor:"pointer"}}}),Gt={backgroundColor:"green"},Jt=["S","M","T","W","T","F","S"],Kt=function(e){var t=e.dayofweek,a=void 0===t?[]:t,n=e.handleDaysChange,c=Yt(),o=Jt.map((function(e,t){return r.a.createElement("div",{key:t,className:c.day,style:Xt(t,a),onClick:function(){return function(e){if(a.includes(e)){var t=a.filter((function(t){return t!==e}));n(t)}else n([].concat(Object(l.a)(a),[e]))}(t)}},e)}));return r.a.createElement("div",{className:c.picker},r.a.createElement("p",{className:c.title}," When to repeat the schedule? "),r.a.createElement("div",{className:c.week},o))},Xt=function(e,t){return t.includes(e)?Gt:null},Vt=a(120),Zt=a(23),_t=a(235),$t=Object(et.a)({timePicker:{width:200}}),Qt=function(e){var t=e.selectedDate,a=e.handleDateChange,n=$t();return r.a.createElement(Zt.a,{utils:Vt.a},r.a.createElement(_t.a,{className:n.timePicker,ampm:!1,margin:"normal",label:"Depart time",helperText:"Time you would like to be on bus.",value:t,onChange:a,KeyboardButtonProps:{"aria-label":"change time"}}))},ea=Y;Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Registering service worker"),!("serviceWorker"in navigator)){e.next=8;break}return e.next=4,navigator.serviceWorker.register("".concat("","/worker.js"),{scope:"/public"}).catch((function(e){return console.log(e)}));case 4:tt=e.sent,console.log("Registered service worker"),e.next=9;break;case 8:console.log("no service worker");case 9:case"end":return e.stop()}}),e)})))();var ta=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)){e.next=6;break}return console.log("Registering service worker"),e.next=4,na().catch((function(e){console.log(e)}));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));function aa(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}function na(){return ra.apply(this,arguments)}function ra(){return(ra=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:aa(ea)}).catch((function(e){return console.log(e)}));case 2:return t=e.sent,console.log("Registered push"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ca=Object(et.a)({form:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignContent:"flex-start"},fields:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignContent:"flex-start"},advanced:{width:"90%","&.MuiExpansionPanel-root:before":{display:"none"}},fake:{width:200},slider:{width:"85%"},days:{marginTop:20,width:"85%"},tick:{marginTop:20,width:"100%",marginLeft:"5%"}}),oa=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ua=function(e){var t=e.form,a=e.setForm,n=e.setLoading,c=ca(),o=r.a.useState(),u=Object(Ie.a)(o,2),l=u[0],i=u[1];r.a.useEffect((function(){var e=la(t.hour.value,t.minute.value);i(e)}),[t.hour]);var s=function(){var e=Object(P.a)(D.a.mark((function e(r){var c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.target.checked){e.next=10;break}return n(!0),e.next=5,ta();case 5:c=e.sent,a(Object(It.a)(Object(It.a)({},t),{},{checked:{touched:!0,value:c||!1}})),n(!1),e.next=11;break;case 10:a(Object(It.a)(Object(It.a)({},t),{},{checked:{touched:!0,value:!1}}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){a(Object(It.a)(Object(It.a)({},t),{},Object(Ht.a)({},e.target.name,{touched:!0,value:e.target.value})))};return r.a.createElement("div",{className:c.form},r.a.createElement("div",{className:c.fields},r.a.createElement(Lt.a,{error:function(){var e=oa.test(String(t.mail.value).toLowerCase());return(!t.mail.value||!e)&&t.mail.touched}(),className:c.fake,margin:"normal",name:"mail",required:!0,label:"Mail",value:t.mail.value,helperText:"",onChange:d}),r.a.createElement(Lt.a,{error:!t.name.value&&t.name.touched,className:c.fake,margin:"normal",autoComplete:"off",name:"name",required:!0,label:"name",value:t.name.value,helperText:"",onChange:d}),r.a.createElement(Lt.a,{error:!t.bus.value&&t.bus.touched,className:c.fake,margin:"normal",type:"number",name:"bus",required:!0,label:"bus number",value:t.bus.value,helperText:"Example: 171",onChange:d}),r.a.createElement(Lt.a,{error:!t.station.value&&t.station.touched,className:c.fake,margin:"normal",type:"number",name:"station",required:!0,label:"station id",value:t.station.value,helperText:"station number, find it on google maps",onChange:d}),r.a.createElement(Qt,{selectedDate:l,handleDateChange:function(e){i(e),a(Object(It.a)(Object(It.a)({},t),{},{hour:{touched:!0,value:null===e||void 0===e?void 0:e.getHours()},minute:{touched:!0,value:null===e||void 0===e?void 0:e.getMinutes()}}))}}),r.a.createElement("div",{className:c.fake}),r.a.createElement(Kt,{dayofweek:t.dayOfWeek.value,handleDaysChange:function(e){a(Object(It.a)(Object(It.a)({},t),{},{dayOfWeek:{touched:!0,value:e}}))}}),r.a.createElement(Lt.a,{required:!0,className:c.fake,margin:"normal",name:"maxTrigger",label:"Max time to station",value:t.maxTrigger.value,type:"number",helperText:"How much minutes it takes to get to station from your starting location at most?",onChange:d,error:!t.maxTrigger.value&&t.maxTrigger.touched}),r.a.createElement(Lt.a,{required:!0,className:c.fake,margin:"normal",name:"minTrigger",label:"Min time to station",value:t.minTrigger.value,type:"number",helperText:"How much minutes it takes to get to station from your starting location if you are quick?",onChange:d,error:!t.minTrigger.value&&t.minTrigger.touched}),r.a.createElement(Lt.a,{className:c.fake,margin:"normal",label:"how many times?",name:"times",value:t.times.value,type:"number",helperText:"How many times to perform the notification? In case you might want the next bus.",onChange:d}),r.a.createElement("div",{className:c.fake})),r.a.createElement("div",{className:c.tick},r.a.createElement(Ut.a,{checked:!!t.checked.value,onChange:s,color:"primary",inputProps:{"aria-label":"secondary checkbox"}}),"use chrome notifications instead of mail?"))},la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date;return a.setHours(Number(e)),a.setMinutes(Number(t)),a},ia=Object(et.a)({error:{color:"red",padding:10,textAlign:"center",fontWeight:"bold"}}),sa=r.a.forwardRef((function(e,t){return r.a.createElement(Rt.a,Object.assign({direction:"up",ref:t},e))})),da=[0,1,2,3,4],ma=Object(u.b)((function(e){return{dialogStatus:e.form.dialogStatus,loggedInMail:e.myschedules.mail}}),(function(e){return{createSchedule:function(t){return e(O(t))},updateSchedule:function(t){return e(w(t))}}}))((function(e){var t=e.schedule,a=e.open,c=e.setOpen,o=e.createSchedule,u=e.updateSchedule,l=e.dialogStatus,i=e.loggedInMail,s=ia(),d=r.a.useState(null),m=Object(Ie.a)(d,2),f=m[0],p=m[1],h=r.a.useState(!1),b=Object(Ie.a)(h,2),v=b[0],g=b[1],x=r.a.useState({confirmDisabled:!0,mail:{touched:!1,value:""},name:{touched:!1,value:""},bus:{touched:!1,value:""},station:{touched:!1,value:""},minTrigger:{touched:!1,value:""},maxTrigger:{touched:!1,value:""},times:{touched:!1,value:""},hour:{touched:!1,value:""},minute:{touched:!1,value:""},dayOfWeek:{touched:!1,value:[]},checked:{touched:!1,value:!1}}),k=Object(Ie.a)(x,2),y=k[0],O=k[1];Object(n.useEffect)((function(){(null===l||void 0===l?void 0:l.success)&&(c(!1),p(null),g(!1)),l&&!l.success&&(p(String(l.error)),g(!1))}),[l]),Object(n.useEffect)((function(){if(t){var e,a,n,r,c=null===t||void 0===t||null===(e=t.rule)||void 0===e?void 0:e.hour;void 0!==c&&null!==c||(c="");var o=null===t||void 0===t||null===(a=t.rule)||void 0===a?void 0:a.minute;void 0!==o&&null!==o||(o=""),O(Object(It.a)(Object(It.a)({},y),{},{mail:{touched:!1,value:(null===t||void 0===t?void 0:t.mail)||""},name:{touched:!1,value:(null===t||void 0===t?void 0:t.name)||""},hour:{touched:!1,value:c},minute:{touched:!1,value:o},dayOfWeek:{touched:!1,value:c?t.rule.dayOfWeek:[]},bus:{touched:!1,value:(null===t||void 0===t?void 0:t.bus)||""},station:{touched:!1,value:(null===t||void 0===t?void 0:t.station)||""},maxTrigger:{touched:!1,value:(null===t||void 0===t||null===(n=t.scheduleTrigger)||void 0===n?void 0:n.max)||""},minTrigger:{touched:!1,value:(null===t||void 0===t||null===(r=t.scheduleTrigger)||void 0===r?void 0:r.min)||""},times:{touched:!1,value:(null===t||void 0===t?void 0:t.times)||""},checked:{touched:!1,value:!!(null===t||void 0===t?void 0:t.webPushSub)}}))}else O(Object(It.a)(Object(It.a)({},y),{},{mail:{touched:!1,value:i},name:{touched:!1,value:""},hour:{touched:!1,value:8},minute:{touched:!1,value:0},dayOfWeek:{touched:!1,value:da},bus:{touched:!1,value:""},station:{touched:!1,value:""},minTrigger:{touched:!1,value:""},maxTrigger:{touched:!1,value:""},times:{touched:!1,value:""},checked:{touched:!1,value:!1}}));p(null),g(!1)}),[a]);var w=function(){c(!1)},j=t?"Update Schedule ".concat(null===t||void 0===t?void 0:t.name):"Add new schedule";return r.a.createElement(Tt.a,{open:a,disableBackdropClick:!0,disableEscapeKeyDown:!0,TransitionComponent:sa,keepMounted:!0,onClose:w,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},v&&r.a.createElement(Bt.a,null),r.a.createElement(Wt.a,{id:"alert-dialog-slide-title"},j),r.a.createElement(At.a,null,r.a.createElement(ua,{form:y,setForm:O,setLoading:g}),r.a.createElement("div",{className:s.error}," ",f," ")),r.a.createElement(Nt.a,null,r.a.createElement(Ct.a,{onClick:w,color:"primary"},"no"),r.a.createElement(Ct.a,{onClick:function(){var e=y.mail,a=y.bus,n=y.station,r=y.maxTrigger,c=y.minTrigger,l=y.times,i=y.hour,s=y.minute,d=y.dayOfWeek,m=y.checked,f=y.name,p=l.touched?l.value||null:"",h={hour:Number(i.value),minute:Number(s.value),dayOfWeek:d.value},b={max:Number(r.value),min:Number(c.value)},v={mail:e.value,name:f.value,bus:a.value,station:n.value,rule:h,scheduleTrigger:b,times:p};Object.keys(v).forEach((function(e){return""===v[e]||void 0===v[e]?delete v[e]:{}})),m.touched&&(v.webPushSub=m.value||!1),g(!0),console.log(v),t?u({id:t.id,data:v}):o(v)},color:"primary",disabled:!Number.isInteger(y.hour.value)||!Number.isInteger(y.minute.value)||!y.mail.value||!y.name.value||!y.bus.value||!y.station.value||!y.maxTrigger.value||!y.minTrigger.value},t?"Update":"Add")))})),fa=Object(et.a)({content:{maxHeight:"85vh",width:"100%",margin:"0 auto",padding:"20px",display:"flex",justifyContent:"center",flexWrap:"wrap",overflowY:"auto",overflowX:"hidden"},contentGrid:{listStyleType:"none",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(14rem, 1fr))",gridAutoRows:"8rem",gridGap:"1rem",padding:0,margin:0},noSchedules:{fontSize:"2em",fontWeight:"bold"}}),pa=Object(u.b)((function(e){return{schedules:e.myschedules.schedules}}),(function(e){return{updateSnackbar:function(t){return e(v(t))},getSchedules:function(){return e(k())},deleteSchedule:function(t){return e(y(t))},updateSchedule:function(t){return e(w(t))}}}))((function(e){var t=e.getSchedules,a=e.deleteSchedule,c=e.schedules,o=e.updateSnackbar,u=e.updateSchedule,l=fa(),i=Object(Pe.b)(),s=r.a.useState(!1),d=Object(Ie.a)(s,2),m=d[0],f=d[1],p=r.a.useState(!1),h=Object(Ie.a)(p,2),b=h[0],v=h[1],g=r.a.useState(!1),x=Object(Ie.a)(g,2),k=x[0],y=x[1];Object(n.useEffect)((function(){t()}),[t]),Object(n.useEffect)((function(){o(i)}),[i]);var O=function(e){f(e)},w=function(e){v(e)},j=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t={paused:!e.paused};u({id:e.id,data:t})},S=[];c&&(S=c.length>0?c.map((function(e){return r.a.createElement(it.a,{flipId:e.id,key:e.id},r.a.createElement("div",{onClick:function(){return j(e)}},r.a.createElement(St,{schedule:e,updateSchedule:O,deleteSchedule:w,pauseSchedule:E})))})):r.a.createElement("p",{className:l.noSchedules}," You don't have any schedules, be sure to create. "));return r.a.createElement(r.a.Fragment,null,!c&&r.a.createElement(Bt.a,null),r.a.createElement(it.b,{flipKey:S.length},r.a.createElement("div",{className:l.content},S)),r.a.createElement(ma,{open:!!m,setOpen:f,schedule:m}),r.a.createElement(qt,{open:!!b,setOpen:v,item:b,onConfirm:function(){a(b.id),v(!1)}}),r.a.createElement(Pt,{open:!!k,setOpen:y,schedule:k}))})),ha=a(233),ba=a(117),va=a.n(ba),ga=Object(et.a)({AddButton:{position:"absolute",bottom:0,right:0,margin:"20px"}}),xa=function(){var e=ga(),t=r.a.useState(!1),a=Object(Ie.a)(t,2),n=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ha.a,{color:"primary","aria-label":"add",className:e.AddButton,onClick:function(){c(!0)}},r.a.createElement(va.a,null)),r.a.createElement(ma,{open:n,setOpen:c}))},ka=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,null),r.a.createElement(pa,null),r.a.createElement(xa,null))},ya=a(118),Oa=a.n(ya),wa=Object(et.a)({"@keyframes fly":{"0%":{transform:"translateY(-400%)"},"100%":{transform:"translateY(0%)"}},svgContainer:{display:"inline-block",position:"relative",width:"100%",paddingBottom:"100%",verticalAlign:"middle",overflow:"hidden"},svgContent:{display:"inline-block",position:"absolute",top:0,left:0},container:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",width:"100%",overflow:"hidden"},formBox:{height:400,width:"50%",minWidth:300,margin:"0 auto",position:"relative"},forceTitle:{marginTop:15,width:"100%",position:"absolute",top:0,textAlign:"center",fontSize:"large",overflow:"hidden",textOverflow:"ellipsis",margin:"0 auto"},form:{position:"absolute",width:"100%",bottom:0,padding:5,display:"flex",justifyContent:"center"},mailField:{width:250},error:{color:"red",width:"100%",position:"absolute",textAlign:"center",top:0,marginTop:120,padding:10,margin:"0 auto",fontWeight:"bold"}}),ja=Object(u.b)((function(e){return{dialogStatus:e.form.dialogStatus}}),(function(e){return{login:function(t){return e(W(t))}}}))((function(e){var t=e.login,a=e.dialogStatus,c=wa(),o=Object(n.useState)(""),u=Object(Ie.a)(o,2),l=u[0],i=u[1],s=r.a.useState(null),d=Object(Ie.a)(s,2),m=d[0],f=d[1];r.a.useEffect((function(){(null===a||void 0===a?void 0:a.success)&&f(null),a&&!a.success&&f(String(a.error))}),[a]),r.a.useEffect((function(){f(null)}),[]);return r.a.createElement("div",{className:c.container},r.a.createElement(st.a,{elevation:3,className:c.formBox},r.a.createElement("svg",{viewBox:"0 0 500 230",preserveAspectRatio:"xMinYMin meet"},r.a.createElement("path",{d:"M0,100 C150,200 350,0 500,100 L500,00 L0,0 Z",style:{stroke:"none",fill:"rgba(0,0,0,0.2)"}})),r.a.createElement("div",{className:c.forceTitle},"Hello"),r.a.createElement("div",{className:c.form},r.a.createElement(Lt.a,{required:!0,autoFocus:!0,className:c.mailField,margin:"normal",variant:"outlined",label:"mail",name:"mail",type:"mail",onChange:function(e){return i(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&l&&(t(l),e.preventDefault())}}),r.a.createElement(Ct.a,{endIcon:r.a.createElement(Oa.a,null),type:"submit",margin:"normal",color:"primary",disabled:!l,onClick:function(){return t(l)}})),r.a.createElement("div",{className:c.error}," ",m," ")))})),Ea=a(123),Sa=Object(u.b)((function(e){return{token:e.myschedules.token}}))((function(e){var t=e.component,a=Object(Ea.a)(e,["component"]);return r.a.createElement(ze.b,Object.assign({},a,{render:function(e){return a.token?r.a.createElement(t,e):r.a.createElement(ze.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));var Ca=function(){return r.a.createElement(u.a,{store:De},r.a.createElement(Qe,null,r.a.createElement(Pe.a,{maxSnack:3,style:{width:"50%"}},r.a.createElement(ze.c,{history:ce},r.a.createElement(ze.d,null,r.a.createElement(ze.b,{exact:!0,path:"/login",component:ja}),r.a.createElement(Sa,{exact:!0,path:"/",component:ka}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(Ca,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){}},[[140,1,2]]]);